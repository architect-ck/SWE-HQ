"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[193,7653],{85478:(e,t,n)=>{n.d(t,{f:()=>i});var s=n(77528),a=n(55456),l=n(4418),o=n(74848);n(96540);let i=function(e){var{ref:t}=e,n=(0,l._)(e,["ref"]);return(0,o.jsx)("svg",(0,a._)((0,s._)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t},n),{children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M4.4 14a2 2 0 100-4 2 2 0 000 4zm9.6-2a2 2 0 11-4 0 2 2 0 014 0zm7.6 0a2 2 0 11-4 0 2 2 0 014 0z",clipRule:"evenodd"})}))}},25954:(e,t,n)=>{n.d(t,{k:()=>i});var s=n(77528),a=n(55456),l=n(4418),o=n(74848);n(96540);let i=function(e){var{ref:t}=e,n=(0,l._)(e,["ref"]);return(0,o.jsx)("svg",(0,a._)((0,s._)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t},n),{children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M7.174 5.619a8.064 8.064 0 011.635-.946l.29-1.158A2 2 0 0111.039 2h1.922a2 2 0 011.94 1.515l.29 1.158c.584.252 1.132.57 1.635.946l1.15-.329a2 2 0 012.282.923l.961 1.665a2 2 0 01-.342 2.437l-.86.832a8.151 8.151 0 010 1.888l.86.83a2 2 0 01.342 2.438l-.96 1.665a2 2 0 01-2.283.923l-1.15-.329a8.063 8.063 0 01-1.635.946l-.29 1.158a2 2 0 01-1.94 1.515H11.04a2 2 0 01-1.94-1.515l-.29-1.158a8.064 8.064 0 01-1.635-.946l-1.15.329a2 2 0 01-2.282-.923l-.961-1.665a2 2 0 01.342-2.437l.86-.831a8.158 8.158 0 010-1.889l-.86-.83a2 2 0 01-.342-2.438l.96-1.665a2 2 0 012.283-.923l1.15.329zm-1.7 1.594l-.961 1.665 1.57 1.518-.114.982a6.157 6.157 0 000 1.425l.114.982-1.57 1.518.96 1.665 2.104-.601.794.593c.38.284.793.523 1.23.711l.908.392.53 2.118h1.922l.53-2.118.909-.392a6.07 6.07 0 001.23-.711l.793-.593 2.103.601.961-1.665-1.57-1.518.114-.982a6.172 6.172 0 000-1.425l-.114-.982 1.57-1.518-.96-1.665-2.104.601-.794-.593a6.067 6.067 0 00-1.23-.71l-.908-.392L12.96 4H11.04l-.53 2.119-.909.391a6.064 6.064 0 00-1.23.711l-.793.593-2.103-.601zM12 16a4 4 0 100-8 4 4 0 000 8zm0-2a2 2 0 110-4 2 2 0 010 4z",clipRule:"evenodd"})}))}},64869:(e,t,n)=>{n.d(t,{X:()=>i});var s=n(77528),a=n(55456),l=n(4418),o=n(74848);n(96540);let i=function(e){var{ref:t}=e,n=(0,l._)(e,["ref"]);return(0,o.jsx)("svg",(0,a._)((0,s._)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t},n),{children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M22 12c0-5.523-4.477-10-10-10S2 6.477 2 12s4.477 10 10 10a1 1 0 100-2 8 8 0 118-8 1 1 0 102 0z",clipRule:"evenodd"})}))}},49853:(e,t,n)=>{n.d(t,{o:()=>i});var s=n(77528),a=n(55456),l=n(4418),o=n(74848);n(96540);let i=function(e){var{ref:t}=e,n=(0,l._)(e,["ref"]);return(0,o.jsx)("svg",(0,a._)((0,s._)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t},n),{children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M11.997 21.5a9.5 9.5 0 01-8.49-5.251A9.38 9.38 0 012.5 11.997V11.5c.267-4.88 4.12-8.733 8.945-8.999L12 2.5a9.378 9.378 0 014.25 1.007A9.498 9.498 0 0121.5 12a9.378 9.378 0 01-.856 3.937l.838 4.376a1 1 0 01-1.17 1.17l-4.376-.838a9.381 9.381 0 01-3.939.856zm3.99-2.882l3.254.623-.623-3.253a1 1 0 01.09-.64 7.381 7.381 0 00.792-3.346 7.5 7.5 0 00-4.147-6.708 7.385 7.385 0 00-3.35-.794H11.5c-3.752.208-6.792 3.248-7.002 7.055L4.5 12a7.387 7.387 0 00.794 3.353A7.5 7.5 0 0012 19.5a7.384 7.384 0 003.349-.793 1 1 0 01.639-.09z",clipRule:"evenodd"})}))}},15583:(e,t,n)=>{n.d(t,{Q:()=>i});var s=n(77528),a=n(55456),l=n(4418),o=n(74848);n(96540);let i=function(e){var{ref:t}=e,n=(0,l._)(e,["ref"]);return(0,o.jsx)("svg",(0,a._)((0,s._)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t},n),{children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M2 11.001a9.001 9.001 0 014.974-8.047A8.876 8.876 0 0110.998 2h.535c.018 0 .037 0 .055.002 3.934.218 7.204 3.02 8.15 6.753a1 1 0 01-1.94.49c-.734-2.9-3.27-5.065-6.294-5.245h-.51a6.876 6.876 0 00-3.12.74l-.004.002A7.001 7.001 0 004 11.003v.002a6.873 6.873 0 00.738 3.117c.206.407.271.871.185 1.32l-.387 2.022 2.022-.387c.448-.086.912-.021 1.32.185.44.222.9.395 1.373.518a1 1 0 11-.502 1.936 8.865 8.865 0 01-1.773-.669.067.067 0 00-.042-.006l-3.47.665a1 1 0 01-1.17-1.17l.665-3.47a.067.067 0 00-.006-.043A8.873 8.873 0 012 11.001zM17.004 20h-.005a3 3 0 01-2.68-1.658l-.004-.007A2.936 2.936 0 0114 17.004v-.206a2.995 2.995 0 012.773-2.797l.233-.001c.46-.001.917.107 1.33.315l.007.004A3 3 0 0120 17v.005c.001.425-.09.845-.268 1.232l-.133.29a1 1 0 00-.074.606l.093.485-.484-.093a1 1 0 00-.606.073l-.29.134a2.937 2.937 0 01-1.234.268zm-.296-8A4.995 4.995 0 0012 16.738v.262c-.002.777.18 1.543.53 2.237a5 5 0 006.542 2.313l2.303.441c.365.07.686-.25.616-.615l-.441-2.303a5 5 0 00-2.312-6.541A4.937 4.937 0 0017 12h-.292z",clipRule:"evenodd"})}))}},47761:(e,t,n)=>{n.d(t,{v:()=>i});var s=n(77528),a=n(55456),l=n(4418),o=n(74848);n(96540);let i=function(e){var{ref:t}=e,n=(0,l._)(e,["ref"]);return(0,o.jsx)("svg",(0,a._)((0,s._)({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",width:"1em",height:"1em",fill:"currentColor",ref:t},n),{children:(0,o.jsx)("path",{fillRule:"evenodd",d:"M21 21a1 1 0 11-2 0v-2a3 3 0 00-3-3H8a3 3 0 00-3 3v2a1 1 0 11-2 0v-2a5 5 0 015-5h8a5 5 0 015 5v2zm-9-9a5 5 0 110-10 5 5 0 010 10zm0-2a3 3 0 100-6 3 3 0 000 6z",clipRule:"evenodd"})}))}},30845:(e,t,n)=>{n.d(t,{Ob:()=>p});var s=n(77528),a=n(55456),l=n(7282),o=n(87134),i=n(49680),r=n(36698),c=n(15440),d=n(18540),u=n(98031),m=n(13814),h=n(91195),v=n(77961);let w=e=>{let{provider:t,authToken:n,onAuthPassed:s,onAuthFailed:a}=e;if(!t.ws)return;let l=t.ws.onmessage,o=t.ws.onopen;t.ws.onmessage=e=>{let{data:n}=e;if("string"!=typeof n)return;let i=(0,v.N)(n);(null==i?void 0:i.authenticated)?(t.ws.onmessage=l,null==o||o(),null==s||s(t,i)):(t.disconnect(),null==a||a(t,i))},t.ws.onopen=()=>{t.ws.send(n)}},g=e=>{var t;let{document:n,roomId:s,isCreatingNewRoom:a,authToken:l,onAuthPassed:o,onAuthFailed:i}=e,r=u.sk;(0,m.Bd)()&&(r=null!==(t=localStorage.getItem("Y_WEBSOCKET_HOST"))&&void 0!==t?t:r);let c=new h.$R(r,s,n,{params:a?{new:"true"}:{},maxReconnectRetryCount:8});return w({provider:c,authToken:l,onAuthPassed:o,onAuthFailed:i}),c.on("status",e=>{let{status:t}=e;"connecting"===t&&w({provider:c,authToken:l,onAuthPassed:o,onAuthFailed:i})}),c},_="monaco",f=(0,o.kg)({wsDocument:new i.JA,wsProvider:void 0,authToken:void 0,authPassed:!1,roomId:void 0,role:void 0,userInfo:void 0,followingClientId:null,clientsInRoom:[],failedToJoinType:d.n.None,switchingQuestionInfo:void 0,switchingLangInfo:void 0,isTriggerQuestionChangeByOthers:!1,joinedTimestamp:void 0,isLeavingQdPage:!1,isCreatingNewRoom:!1,isQuestionOrLangChangedActively:!1},(e,t)=>{let n=t=>e(e=>(0,a._)((0,s._)({},e),{isCreatingNewRoom:t})),l=t=>e(e=>(0,a._)((0,s._)({},e),{role:t})),o=t=>e(e=>(0,a._)((0,s._)({},e),{userInfo:t})),d=t=>e(e=>(0,a._)((0,s._)({},e),{clientsInRoom:t})),u=t=>e(e=>(0,a._)((0,s._)({},e),{authPassed:t})),m=t=>e(e=>(0,a._)((0,s._)({},e),{joinedTimestamp:t})),h=e=>{var s;let a=g({document:t().wsDocument,roomId:e,isCreatingNewRoom:t().isCreatingNewRoom,authToken:null!==(s=t().authToken)&&void 0!==s?s:"",onAuthPassed:(e,t)=>{let{role:s}=t,{avatar:a}=t.userInfo,i=t.userInfo.realName||t.userInfo.username;e.awareness.setLocalStateField("role",s),e.awareness.setLocalStateField("username",i),e.awareness.setLocalStateField("avatar",a),l(s),o({username:i,avatar:a}),m(Date.now()),n(!1),u(!0),c.L.qdCollabJoinClick({qd_collab_role:s})},onAuthFailed:()=>{n(!1)}});return a.awareness.on("change",()=>{var e;let n=a.awareness.states,s=[...null!==(e=null==n?void 0:n.entries())&&void 0!==e?e:[]].map(e=>{let[t,n]=e;return{id:t,username:n.username,avatar:n.avatar,role:n.role}});(0,r.A)(t().clientsInRoom,s)||d(s)}),a},v=t=>e(e=>{var n;null===(n=e.wsProvider)||void 0===n||n.destroy();let l=h(t);return(0,a._)((0,s._)({},e),{wsProvider:l,roomId:t})}),w=()=>{e(e=>{var t;return null===(t=e.wsProvider)||void 0===t||t.destroy(),(0,a._)((0,s._)({},e),{wsDocument:new i.JA,wsProvider:void 0,authPassed:!1,roomId:void 0,role:void 0,followingClientId:null,clientsInRoom:[],isCreatingNewRoom:!1})})};return{clientId:()=>t().wsDocument.clientID,sharedMonacoText:()=>t().wsDocument.getText(_),sharedEditorState:()=>t().wsDocument.getMap("map"),setAuthToken:t=>e(e=>(0,a._)((0,s._)({},e),{authToken:t})),setDocText:t=>e(e=>{let n=e.wsDocument.getText(_);return n.delete(0,n.length),n.insert(0,t),(0,a._)((0,s._)({},e),{wsDocument:e.wsDocument})}),setRole:l,joinRoom:e=>{v(e)},closeRoom:()=>{e(e=>(e.wsDocument.getMap("map").set("closeRoom",!0),(0,a._)((0,s._)({},e),{wsDocument:e.wsDocument}))),setTimeout(()=>t().roomId&&w(),1e3)},setClientsInRoom:d,setFollowingClientId:t=>e(e=>(0,a._)((0,s._)({},e),{followingClientId:t})),endCollaboration:w,setFailedToJoinType:t=>e(e=>(0,a._)((0,s._)({},e),{failedToJoinType:t})),setSwitchingQuestionInfo:t=>e(e=>(0,a._)((0,s._)({},e),{switchingQuestionInfo:t})),setSwitchingLangInfo:t=>e(e=>(0,a._)((0,s._)({},e),{switchingLangInfo:t})),setIsTriggerQuestionChangeByOthers:t=>e(e=>(0,a._)((0,s._)({},e),{isTriggerQuestionChangeByOthers:t})),setIsLeavingQdPage:t=>e(e=>(0,a._)((0,s._)({},e),{isLeavingQdPage:t})),setIsCreatingNewRoom:n,setIsQuestionOrLangChangedActively:t=>e(e=>(0,a._)((0,s._)({},e),{isQuestionOrLangChangedActively:t}))}}),p=(0,l.vt)(f)},18540:(e,t,n)=>{n.d(t,{n:()=>s});var s=function(e){return e[e.None=0]="None",e[e.Premium=1]="Premium",e[e.MaximumCapacity=2]="MaximumCapacity",e[e.DynamicLayout=3]="DynamicLayout",e[e.NotFound=4]="NotFound",e[e.NotLoggedIn=5]="NotLoggedIn",e[e.JoinedOtherRoom=6]="JoinedOtherRoom",e[e.ConnectionFailedHost=7]="ConnectionFailedHost",e[e.ConnectionFailedGuest=8]="ConnectionFailedGuest",e[e.SameUserInRoom=9]="SameUserInRoom",e[e.NoHost=10]="NoHost",e[e.MaxTime=11]="MaxTime",e[e.CloseRoom=12]="CloseRoom",e[e.Unknown=13]="Unknown",e}({})},53882:(e,t,n)=>{n.d(t,{$:()=>d,z:()=>u});var s=n(77528),a=n(55456),l=n(4418),o=n(74848);n(96540);var i=n(82479),r=n(64869),c=n(36768);let d=function(e){var{ref:t}=e,n=(0,l._)(e,["ref"]);let{variant:d="secondary",readonly:u,onClick:m,loading:h,className:v,block:w}=n,g=(0,l._)(n,["variant","readonly","onClick","loading","className","block"]),_=g.disabled||h;return(0,o.jsxs)("button",(0,a._)((0,s._)({},g),{onClick:u?void 0:m,ref:t,disabled:_,className:(0,i.xF)("rounded px-3 py-1.5 font-medium","items-center whitespace-nowrap","focus:outline-none",{"cursor-not-allowed opacity-50":_||u},{"inline-flex":!w,flex:w},{[(0,i.xF)("text-label-r",c.MY.bgGreenStandard,c.MY.bgGreen3Hover)]:"primary"===d,[(0,i.xF)(c.MY.fill3,!_&&c.MY.fill2Hover,c.MY.label2)]:"secondary"===d,[(0,i.xF)("bg-gray-8 dark:bg-brand-orange",c.MY.labelReverse)]:"black"===d,[(0,i.xF)(c.MY.bgBrandOrange,c.MY.labelReverse)]:"premium"===d,[(0,i.xF)(c.MY.bgRedStandard,c.MY.labelReverse)]:"danger"===d,[(0,i.xF)(c.MY.bgBlueStandard,"hover:bg-dark-blue-s",c.MY.labelReverse)]:"blue"===d},v),children:[h&&(0,o.jsx)(r.X,{className:"mr-2 animate-spin"}),n.children]}))},u=function(e){var{ref:t}=e,n=(0,l._)(e,["ref"]);let{variant:d="secondary",loading:u,className:m}=n,h=(0,l._)(n,["variant","loading","className"]),v=h.disabled||u;return(0,o.jsxs)("a",(0,a._)((0,s._)({},h),{ref:t,className:(0,i.xF)("rounded px-3 py-1.5 font-medium","inline-flex items-center whitespace-nowrap","transition-all focus:outline-none",{"cursor-not-allowed opacity-50":v},{[(0,i.xF)(c.MY.labelReverse,c.MY.labelReverseHover,c.MY.fillBlueStandard)]:"primary"===d,[(0,i.xF)(c.MY.fill3,!v&&c.MY.fill2Hover,c.MY.label2,c.MY.label2Hover)]:"secondary"===d},m),children:[u&&(0,o.jsx)(r.X,{className:"mr-2 animate-spin"}),n.children]}))}},87653:(e,t,n)=>{n.r(t),n.d(t,{PlaceholderForNull:()=>r});var s=n(74848);n(96540);var a=n(32485),l=n.n(a),o=n(94911),i=n(9935);function r(e){let t=(0,o.h)();return(0,s.jsx)(i.T,{src:t?"/_next/static/images/null_dark-3f55ffa94690763ee68c9a2be3074a42.png":"/_next/static/images/null_light-53585615fd723ba992bd2df7a10d10d1.png",className:l()(e.className,{"w-[200px]":!e.className}),alt:"数据为空"})}},8732:(e,t,n)=>{n.d(t,{Sn:()=>a,ZR:()=>l});var s=n(9421);let a=()=>({mutate:null,mutateAsync:null,isLoading:!1,isFetching:!1}),l=()=>(0,s.I)([],()=>null)},79411:(e,t,n)=>{n.d(t,{M:()=>o});var s=n(96540),a=n(77961);let l=!!window.localStorage;function o(e,t,n){let[o,i]=(0,s.useState)(()=>{var n;if(!l)return t;let s=localStorage.getItem(e);return null!==(n=(0,a.N)(s))&&void 0!==n?n:t}),[r,c]=(0,s.useState)(!1),d=(0,s.useRef)(t),u=(0,s.useCallback)((t,n)=>{try{i(s=>{let a=t instanceof Function?t(s):t;return(null==n?void 0:n.skipStorage)||!l||(void 0===a?localStorage.removeItem(e):localStorage.setItem(e,JSON.stringify(a))),a})}catch(e){}},[e]);return(0,s.useEffect)(()=>{if(!l)return;let t=localStorage.getItem(e),s=(0,a.N)(t);((null==n?void 0:n.writeIfNotExists)?u:i)(null!=s?s:d.current),c(!0)},[e,null==n?void 0:n.writeIfNotExists,i,u]),[o,u,r]}},31261:(e,t,n)=>{n.d(t,{s:()=>c});var s=n(96540),a=n(49130),l=n(13814),o=n(84876);let i=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:250,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{leading:!0,trailing:!0},a=(0,s.useRef)(e);(0,s.useEffect)(()=>{a.current=e},[e]);let{leading:l,trailing:i}=n;return(0,s.useCallback)(t?(0,o.A)(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return a.current(...t)},t,{leading:l,trailing:i}):()=>void 0,[t,l,i])};var r=n(70094);let c=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},[n,o]=(0,s.useState)(void 0),[c,d]=(0,s.useState)(void 0),u=(0,s.useCallback)(()=>{if(!e)return;let{width:t,height:n}=e.getBoundingClientRect();o(t),d(n)},[e]),{throttle:m}=t||{},h=i(u,m),v=m?h:u;return(0,r.E)(()=>{if(!e||!(0,l.Bd)())return;v();let t=new a.tb(v);return t.observe(e),()=>{t.unobserve(e)}},[v,e]),{width:n,height:c}}},90005:(e,t,n)=>{n.d(t,{I:()=>i});var s=n(96540),a=n(70094);n(74848);let l=new Map,o=(0,s.createContext)({insertCss:e=>{if(!e)return;let[t]=e._getContent()[0],n=l.get(t)||0;if(l.set(t,n+1),!n&&!document.getElementById(t)){let n=document.createElement("style");n.id=t,n.textContent=e._getCss(),document.head.appendChild(n)}return()=>{let e=l.get(t)||0;if(e>1)l.set(t,e-1);else{let e=document.getElementById(t);e&&document.head.removeChild(e),l.delete(t)}}}}),i=e=>{let{insertCss:t}=(0,s.useContext)(o);(0,a.E)(()=>e&&t(e),[t,e])}},13654:(e,t,n)=>{n.d(t,{l:()=>l});var s=n(96540),a=n(26934);let l=()=>{let e=(0,s.useCallback)(()=>({width:a.oc?window.innerWidth:void 0,height:a.oc?window.innerHeight:void 0}),[]),[t,n]=(0,s.useState)(e);return(0,s.useEffect)(()=>{if(!a.oc)return!1;function t(){n(e())}return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[e]),t}},86262:(e,t,n)=>{n.d(t,{T:()=>s});var s=function(e){return e.LandingPagePremiumLink="lp_pl",e.NavbarOldPremiumLink="nb_opl",e.StoreOldPremiumLink="sto_opl",e.NavbarNewPremiumLink="nb_npl",e.StoreNewPremiumLink="sto_npl",e.UserMenuPremiumLink="um_pl",e.MockInterviewCompanyModal="mi_cm",e.QuestionDetailPremiumQuestion="qd3_pq",e.QuestionDetailPremiumSolution="qd3_ps",e.QuestionDetailPremiumVideoSolution="qd3_pvs",e.QuestionDetailCompanyModal="qd3_cm",e.QuestionDetailLightningJudger="qd3_lj",e.QuestionDetailSubmitRateLimit="qd3_srl",e.QuestionDetailAutocomplete="qd3_ac",e.QuestionDetailDebuggerTab="qd3_dt",e.QuestionDetailAiHelper="qd3_ai",e.QuestionDetailLayoutManager="qd3_lm",e.QuestionDetailCloudStorage="qd3_cs",e.QuestionDetailAdvanceSettings="qd3_adv",e.ProblemsetFrequency="ps_fq",e.ProblemsetPremiumQuestion="ps_pq",e.ProblemsetCompanyTag="ql_ct",e.ProblemsetFilterCompanyTag="ql_fct",e.ExplorePremiumCardStartButton="ex_pcs",e.ExplorePremiumItem="ex_pi",e.ExplorePremiumSolution="ex_ps",e.ExploreVACPremium="ex_vac",e.StudyPlanV2PremiumPlan="sp2_pp",e.StudyPlanV2PremiumGroup="sp2_pg",e.StudyPlanV2PremiumGroupCalendar="sp2_pc",e.PremiumBetaFeature="pb_f",e.AdSenseRemove="ad_rm",e.ComplexityAnalysis="complexity_analysis",e.CompanyUpgrade="company_upgrade",e.QuestionDetailCollabMode="qd3_clm",e.SmartListFilter="smart_list_filter",e.SmartListSort="smart_list_sort",e.FrequencyLock="frequency_lock",e.SmartListFilterEdit="smart_list_filter_edit",e.QuestLevel="quest_level",e.QuestList="quest_list",e.StudyPlanCard="sp_cd",e}({})},91195:(e,t,n)=>{n.d(t,{$R:()=>P,BA:()=>p,Yp:()=>C,c7:()=>_,io:()=>y,kj:()=>w,nj:()=>g,u9:()=>b,uu:()=>x,yy:()=>f});var s=n(56615),a=n(62132),l=n(58775),o=n(25968),i=n(57724),r=n(13861),c=n(42946),d=n(31116),u=n(63043),m=n(54972),h=n(93254),v=n(65606);let w=4001,g=4002,_=4003,f=4004,p=4005,x=4006,y=4007,b=4008,C=4099,R=[];R[0]=(e,t,n,s,a)=>{l.zd(e,0);let o=i.VU(t,e,n.doc,n);s&&o===i.Zg&&!n.synced&&(n.synced=!0)},R[3]=(e,t,n,s,a)=>{l.zd(e,1),l.Gu(e,c.X3(n.awareness,Array.from(n.awareness.getStates().keys())))},R[1]=(e,t,n,s,a)=>{c.tQ(n.awareness,o.bo(t),n)},R[2]=(e,t,n,s,a)=>{r.gU(t,n.doc,(e,t)=>S(n,t))};let S=(e,t)=>console.warn("Permission denied to access ".concat(e.url,".\n").concat(t)),I=(e,t,n)=>{let s=o.$C(t),a=l.xv(),i=o.cw(s),r=e.messageHandlers[i];return r?r(a,s,e,n,i):console.error("Unable to compute message"),a},k=e=>{if(e.shouldConnect&&null===e.ws){let t=new e._WS(e.url);t.binaryType="arraybuffer",e.ws=t,e.wsconnecting=!0,e.wsconnected=!1,e.synced=!1,t.onmessage=n=>{e.wsLastMessageReceived=a._g();let s=I(e,new Uint8Array(n.data),!0);l.Bw(s)>1&&t.send(l.Fo(s))},t.onerror=t=>{e.emit("connection-error",[t,e])},t.onclose=t=>{e.emit("connection-close",[t,e]),e.ws=null,e.wsconnecting=!1,e.wsconnected?(e.wsconnected=!1,e.synced=!1,c._g(e.awareness,Array.from(e.awareness.getStates().keys()).filter(t=>t!==e.doc.clientID),e),e.emit("status",[{status:"disconnected"}])):e.wsUnsuccessfulReconnects++,[w,g,_,f,p,x].includes(t.code)||(e._maxReconnectRetryCount>0&&e.wsUnsuccessfulReconnects>e._maxReconnectRetryCount&&(e.shouldConnect=!1,e.wsUnsuccessfulReconnects=0,e.emit("status",[{status:"disconnected"}]),e.emit("connection-error-max-retry",[t,e])),setTimeout(k,u.jk(100*u.n7(2,e.wsUnsuccessfulReconnects),e.maxBackoffTime),e))},t.onopen=()=>{e.wsLastMessageReceived=a._g(),e.wsconnecting=!1,e.wsconnected=!0,e.wsUnsuccessfulReconnects=0,e.emit("status",[{status:"connected"}]);let n=l.xv();if(l.zd(n,0),i.ue(n,e.doc),t.send(l.Fo(n)),null!==e.awareness.getLocalState()){let n=l.xv();l.zd(n,1),l.Gu(n,c.X3(e.awareness,[e.doc.clientID])),t.send(l.Fo(n))}},e.emit("status",[{status:"connecting"}])}},M=(e,t)=>{let n=e.ws;e.wsconnected&&n&&n.readyState===n.OPEN&&n.send(t),e.bcconnected&&s.mk(e.bcChannel,t,e)};class P extends d.c{get synced(){return this._synced}set synced(e){this._synced!==e&&(this._synced=e,this.emit("synced",[e]),this.emit("sync",[e]))}destroy(){0!==this._resyncInterval&&clearInterval(this._resyncInterval),clearInterval(this._checkInterval),this.disconnect(),void 0!==v&&v.off("exit",this._exitHandler),this.awareness.off("update",this._awarenessUpdateHandler),this.doc.off("update",this._updateHandler),super.destroy()}connectBc(){if(this.disableBc)return;this.bcconnected||(s.B1(this.bcChannel,this._bcSubscriber),this.bcconnected=!0);let e=l.xv();l.zd(e,0),i.ue(e,this.doc),s.mk(this.bcChannel,l.Fo(e),this);let t=l.xv();l.zd(t,0),i.nh(t,this.doc),s.mk(this.bcChannel,l.Fo(t),this);let n=l.xv();l.zd(n,3),s.mk(this.bcChannel,l.Fo(n),this);let a=l.xv();l.zd(a,1),l.Gu(a,c.X3(this.awareness,[this.doc.clientID])),s.mk(this.bcChannel,l.Fo(a),this)}disconnectBc(){let e=l.xv();l.zd(e,1),l.Gu(e,c.X3(this.awareness,[this.doc.clientID],new Map)),M(this,l.Fo(e)),this.bcconnected&&(s.al(this.bcChannel,this._bcSubscriber),this.bcconnected=!1)}disconnect(){this.shouldConnect=!1,this.disconnectBc(),null!==this.ws&&this.ws.close()}connect(){this.shouldConnect=!0,this.wsconnected||null!==this.ws||(k(this),this.connectBc())}constructor(e,t,n,{connect:o=!0,awareness:r=new c.ww(n),params:d={},WebSocketPolyfill:u=WebSocket,resyncInterval:w=-1,maxBackoffTime:g=2500,disableBc:_=!1,maxReconnectRetryCount:f=-1}={}){for(super();"/"===e[e.length-1];)e=e.slice(0,e.length-1);let p=m.V(d);this.maxBackoffTime=g,this.bcChannel=e+"/"+t,this.url=e+"/"+t+(0===p.length?"":"?"+p),this.roomname=t,this.doc=n,this._WS=u,this.awareness=r,this.wsconnected=!1,this.wsconnecting=!1,this.bcconnected=!1,this.disableBc=_,this.wsUnsuccessfulReconnects=0,this.messageHandlers=R.slice(),this._synced=!1,this.ws=null,this.wsLastMessageReceived=0,this.shouldConnect=o,this._resyncInterval=0,w>0&&(this._resyncInterval=setInterval(()=>{if(this.ws&&this.ws.readyState===WebSocket.OPEN){let e=l.xv();l.zd(e,0),i.ue(e,n),this.ws.send(l.Fo(e))}},w)),this._maxReconnectRetryCount=f,this._bcSubscriber=(e,t)=>{if(t!==this){let t=I(this,new Uint8Array(e),!1);l.Bw(t)>1&&s.mk(this.bcChannel,l.Fo(t),this)}},this._updateHandler=(e,t)=>{if(t!==this){let t=l.xv();l.zd(t,0),i.f7(t,e),M(this,l.Fo(t))}},this.doc.on("update",this._updateHandler),this._awarenessUpdateHandler=(e,t)=>{let{added:n,updated:s,removed:a}=e,o=n.concat(s).concat(a),i=l.xv();l.zd(i,1),l.Gu(i,c.X3(r,o)),M(this,l.Fo(i))},this._exitHandler=()=>{c._g(this.awareness,[n.clientID],"app closed")},h.Ll&&void 0!==v&&v.on("exit",this._exitHandler),r.on("update",this._awarenessUpdateHandler),this._checkInterval=setInterval(()=>{this.wsconnected&&3e4<a._g()-this.wsLastMessageReceived&&this.ws.close()},3e3),o&&this.connect()}}}}]);